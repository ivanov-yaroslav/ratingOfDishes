(()=>{"use strict";let t=(t,e=500,o=0)=>{t.classList.contains("_slide")||(t.classList.add("_slide"),t.style.transitionProperty="height, margin, padding",t.style.transitionDuration=e+"ms",t.style.height=`${t.offsetHeight}px`,t.offsetHeight,t.style.overflow="hidden",t.style.height=o?`${o}px`:"0px",t.style.paddingTop=0,t.style.paddingBottom=0,t.style.marginTop=0,t.style.marginBottom=0,window.setTimeout((()=>{t.hidden=!o,!o&&t.style.removeProperty("height"),t.style.removeProperty("padding-top"),t.style.removeProperty("padding-bottom"),t.style.removeProperty("margin-top"),t.style.removeProperty("margin-bottom"),!o&&t.style.removeProperty("overflow"),t.style.removeProperty("transition-duration"),t.style.removeProperty("transition-property"),t.classList.remove("_slide"),document.dispatchEvent(new CustomEvent("slideUpDone",{detail:{target:t}}))}),e))},e=(t,e=500,o=0)=>{if(!t.classList.contains("_slide")){t.classList.add("_slide"),t.hidden=!t.hidden&&null,o&&t.style.removeProperty("height");let n=t.offsetHeight;t.style.overflow="hidden",t.style.height=o?`${o}px`:"0px",t.style.paddingTop=0,t.style.paddingBottom=0,t.style.marginTop=0,t.style.marginBottom=0,t.offsetHeight,t.style.transitionProperty="height, margin, padding",t.style.transitionDuration=e+"ms",t.style.height=n+"px",t.style.removeProperty("padding-top"),t.style.removeProperty("padding-bottom"),t.style.removeProperty("margin-top"),t.style.removeProperty("margin-bottom"),window.setTimeout((()=>{t.style.removeProperty("height"),t.style.removeProperty("overflow"),t.style.removeProperty("transition-duration"),t.style.removeProperty("transition-property"),t.classList.remove("_slide"),document.dispatchEvent(new CustomEvent("slideDownDone",{detail:{target:t}}))}),e)}},o=(o,n=500)=>o.hidden?e(o,n):t(o,n);let n=!1;setTimeout((()=>{if(n){let t=new Event("windowScroll");window.addEventListener("scroll",(function(e){document.dispatchEvent(t)}))}}),0),document.addEventListener("DOMContentLoaded",(()=>{!function(){const t=document.querySelectorAll("textarea[data-autoheight]");t.length&&t.forEach((t=>{const e=getComputedStyle(t,null),o=Math.round(parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth)),n=t.hasAttribute("data-autoheight-min")?Number(t.dataset.autoheightMin):Number(t.offsetHeight),i=t.hasAttribute("data-autoheight-max")?Number(t.dataset.autoheightMax):1/0;function s(){t.style.height="auto";const e=t.scrollHeight+o;t.style.overflowY=e>i?"auto":"hidden",t.style.height=Math.min(Math.max(t.scrollHeight,n),i)+"px"}s(),t.addEventListener("focusin",(t=>{s()})),t.addEventListener("input",(t=>{s()})),window.addEventListener("resize",(t=>{s()}))}))}(),document.addEventListener("click",(t=>{const e=t.target,n=e.closest(".dish-item");if(e&&n&&!e.closest(".rating")&&!e.closest(".dish-form")&&!n.classList.contains("_process")){const t=n.querySelector(".rating"),e=n.querySelector(".dish-form");n.classList.toggle("_active"),n.classList.add("_process"),o(t,300),o(e,300),setTimeout((()=>n.classList.remove("_process")),300)}})),function(t){const e=document.querySelectorAll("form");e.length>0&&e.forEach((function(e){e.addEventListener("submit",(function(o){o.preventDefault();const n=e.closest(".dish-item"),i=e.querySelector("textarea");if(n){const e=n.querySelector(".rating"),o=e.querySelector(".rating__value"),s=e.querySelector(".rating__active");o.textContent&&"0"!=o.textContent?(o.textContent="0",s.style.width="0",i.value="",t()):(e.classList.remove("_shake"),setTimeout((function(){e.classList.add("_shake")}),0),setTimeout((function(){e.classList.remove("_shake")}),400))}else""!==i.value.trim()&&(i.value="",t())}))}))}((()=>console.log("Форма відправлена"))),function(t,e=2e4){let o,n=e;function i(){clearTimeout(o),window.location.pathname.includes(t)||(o=setTimeout((()=>window.location.href=t),n))}let s=localStorage.getItem("idleTime");if(s)n=s;else if(window.location.pathname.includes(t)){const t=document.querySelector("[data-idletime]");t&&(n=t.getAttribute("data-idletime"),localStorage.setItem("idleTime",n))}window.onload=i,window.onmousemove=i,window.onclick=i,window.onscroll=i,window.onkeypress=i}("home.html")})),window.FLS=!1,document.documentElement.classList.contains("loading")||window.addEventListener("load",(function(){setTimeout((function(){document.documentElement.classList.add("loaded")}),0)})),function(){const t=document.querySelectorAll(".rating");t.length>0&&function(){let e,o;for(let e=0;e<t.length;e++){n(t[e])}function n(t){i(t),s(),t.classList.contains("rating--set")&&r(t)}function i(t){e=t.querySelector(".rating__active"),o=t.querySelector(".rating__value")}function s(t=o.innerHTML){const n=t/.05;e.style.width=`${n}%`}function r(t){const e=t.querySelectorAll(".rating__item");for(let n=0;n<e.length;n++){const r=e[n];r.addEventListener("mouseenter",(function(e){i(t),s(r.value)})),r.addEventListener("mouseleave",(function(t){s()})),r.addEventListener("click",(function(e){i(t),t.dataset.ajax?a(r.value,t):(o.innerHTML=n+1,s())}))}}async function a(t,e){if(!e.classList.contains("rating_sending")){e.classList.add("rating_sending");let t=await fetch("rating.json",{method:"GET"});if(t.ok){const n=(await t.json()).newRating;o.innerHTML=n,s(),e.classList.remove("rating_sending")}else alert("Помилка"),e.classList.remove("rating_sending")}}}()}()})();